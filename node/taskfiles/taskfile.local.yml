version: "3"

tasks:
  test-submission:
    dotenv: [".env"]
    cmds:
      - go run ./cmd/test_submission/main.go
  local-admin:
    dotenv: [".env"]
    cmds:
      - go run ./cmd/admin/main.go
  local-fetcher-test:
    dotenv: [".env"]
    cmds:
      - go run ./cmd/test_fetcher/main.go
  local-fetcher-aggregator-test:
    dotenv: [".env"]
    cmds:
      - go run ./cmd/test_fetcher_and_aggregator/main.go
  boot-node:
    cmds:
      - go run ./cmd/boot/main.go
  test-db:
    dotenv: [".env"]
    cmds:
      - go test ./pkg/db -v
  test-admin:
    dotenv: [".env"]
    cmds:
      - go test ./pkg/admin/tests -v
  test-fetcher:
    dotenv: [".env"]
    cmds:
      - go test ./pkg/fetcher -v
  test-aggregator:
    dotenv: [".env"]
    cmds:
      - go test ./pkg/aggregator -v
  test-utils:
    dotenv: [".env"]
    cmds:
      - go test ./pkg/utils/tests -v
  test-bus:
    cmds:
      - go test ./pkg/bus -v
  test-libp2p:
    cmds:
      - go test ./pkg/libp2p -v
  test:
    cmds:
      - task: test-db
      - task: test-admin
      - task: test-bus
      - task: test-libp2p
      - task: test-fetcher
      - task: test-utils
      - task: test-aggregator
