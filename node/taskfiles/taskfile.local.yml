version: "3"

tasks:
  test-db:
    dotenv: [".env"]
    cmds:
      - go test ./pkg/db -v
  test-admin:
    dotenv: [".env"]
    cmds:
      - go test ./pkg/admin/tests -v
  test-fetcher:
    dotenv: [".env"]
    cmds:
      - go test ./pkg/fetcher -v
  test-utils:
    cmds:
      - go test ./pkg/utils/tests -v
  test-bus:
    cmds:
      - go test ./pkg/bus -v
  test-libp2p:
    cmds:
      - go test ./pkg/libp2p -v
  test:
    deps:
      - test-db
      - test-admin
      - test-bus
      - test-libp2p
      - test-admin
      - test-fetcher
